<!doctype html>
<html lang="ja">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="bootstrap.css">

  <style>
    .nameform>div {
      width: 40%;
    }

    .nameform>label {
      width: auto;
    }

    .tableSize>tr>th {
      width: 25%;
    }

    .tableSize>tr>td {
      width: 100%;
    }

    img {
      width: 45%;
      margin-right: 10px;
      border: 1px solid #000;
    }

    #img1 input {
      margin-top: 10px;
      margin-bottom: 10px;
    }

    #img2 input {
      margin-top: 10px;
      margin-bottom: 10px;
    }
  </style>

  <title>寄付申し込み</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
       <a class="navbar-brand" href="top.html">さんすうらんど・りさいくる</a>
       <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01"
          aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav me-auto">
             <li class="nav-item">
                <a class="nav-link" href="top.html">トップ</a>
             </li>
             <li class="nav-item">
                <a class="nav-link" href="kifu_m.html">寄付する</a>
             </li>
             <li class="nav-item">
                <a class="nav-link" href="konyu_m.html">買う</a>
             </li>
             <li class="nav-item">
                <a class="nav-link" href="help.html">ヘルプ</a>
             </li>
             <li class="nav-item">
                <a class="nav-link" href="お問い合わせ.html">お問い合わせ</a>
             </li>
          </ul>
       </div>
    </div>
 </nav>

  <main class="container mt-5 center-block" method="post">
    <h2 class="mb-5">寄付申し込み</h2>
    <form method="post" action="kifu_k.html">
      <table class="table">
        <tbody class="tableSize">
          <tr>
            <th class="align-middle">児童氏名</th>
            <td class="row align-middle nameform">
              <label class="form-label my-auto text-end">姓</label>
              <div>
                <input type="text" class="form-control" placeholder="山田">
              </div>
              <label class="form-label my-auto text-end">名</label>
              <div>
                <input type="text" class="form-control" placeholder="太郎">
              </div>
            </td>
          </tr>
          <tr>
            <th class="align-middle">保護者氏名</th>
            <td class="row align-middle nameform">
              <label class="form-label my-auto text-end">姓</label>
              <div>
                <input type="text" class="form-control" placeholder="山田">
              </div>
              <label class="form-label my-auto text-end">名</label>
              <div>
                <input type="text" class="form-control" placeholder="一郎">
              </div>
            </td>
          </tr>
          <tr>
            <th class="align-middle">郵便番号</th>
            <td>
              <input type="tel" class="form-control" placeholder="123-4567" pattern="\d{3}-?\d{4}">
          </tr>
          <tr>
            <th class="align-middle">住所</th>
            <td>
              <input type="text" class="form-control">
            </td>
          </tr>
          <tr>
            <th class="align-middle">電話番号</th>
            <td>
              <input type="tel" class="form-control" placeholder="080-1234-5678" pattern="\d{2,4}-\d{2,4}-\d{3,4}">
            </td>
          </tr>
          <tr>
            <th class="align-middle">メールアドレス</th>
            <td>
              <input type="email" class="form-control" placeholder="yamada.taro@gmail.com">
            </td>
          </tr>
          <tr>
            <th class="align-middle">寄付する算数セットの外見</th>
            <td>
              <div id="img1">
                <!--<input type="file" class="form-control" accept="image/*" onchange="loop(event,'item1');" multiple> 複数選択-->
                <input type="file" class="form-control" name="file[]" accept="image/*" onchange="imgUpload1(event);">
                <!--<div id="preview-item1"></div> -->
                <div id="preview1"></div>
              </div>
            </td>
          </tr>


          <tr>
            <th class="align-middle">寄付する算数セットの中身</th>
            <td>
              <div id="img2">
                <input type="file" class="form-control" name="file[]" accept="image/*" onchange="imgUpload2(event);">
                <div id="preview2"></div>
              </div>
            </td>
          </tr>

        </tbody>
      </table>
      <div class="text-end mt-4">
        <input type="submit" class="btn btn-primary btn-lg" value="確認画面へ">
      </div>
    </form>
  </main>

  <br>
  <footer class="border-top footer text-center">

    <div class="container">

      ©こぴーらいと

    </div>

  </footer>

  <script>

    /* 複数選択
    var cnt = 0;
    var tmpId = 'tmp-' + cnt;

    function loop(event, id) {
      for (let file of event.target.files) {
        imgPreView(file, id);
      }
      tmpId = 'tmp-' + ++cnt;
    }

    function imgPreView(file, id) {
      let preview = document.getElementById("preview-" + id);
      let previewImages = document.getElementsByClassName(tmpId);
      let reader = new FileReader();

      if (previewImages != null) {
        for (let img of previewImages) {
          preview.removeChild(img);
        }
      }

      reader.onload = function (event) {
        var img = document.createElement("img");
        img.setAttribute("src", reader.result);
        img.setAttribute("id", "previewImage-" + id);
        img.setAttribute("class", tmpId);
        preview.appendChild(img);
      };

      reader.readAsDataURL(file);
    }

    */


    function imgUpload1(event) {
      var file = event.target.files[0];
      var reader = new FileReader();
      var preview = document.getElementById("preview1");
      var previewImage = document.getElementById("previewImage");

      if (previewImage != null) {
        preview.removeChild(previewImage);
      }
      reader.onload = function (event) {
        var img = document.createElement('img');
        img.setAttribute("src", reader.result);
        img.setAttribute("id", "previewImage");
        preview.appendChild(img);
      };

      reader.readAsDataURL(file);
    }


    function imgUpload2(event) {
      var file = event.target.files[0];
      var reader = new FileReader();
      var preview = document.getElementById("preview2");
      var previewImage = document.getElementById("previewImage");

      if (previewImage != null) {
        preview.removeChild(previewImage);
      }
      reader.onload = function (event) {
        var img = document.createElement('img');
        img.setAttribute("src", reader.result);
        img.setAttribute("id", "previewImage");
        preview.appendChild(img);
      };

      reader.readAsDataURL(file);
    }

  </script>
</body>

</html>