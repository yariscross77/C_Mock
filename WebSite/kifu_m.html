<!doctype html>
<html lang="ja">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="bootstrap.css">

  <style>
    .nameform>div {
      width: 40%;
    }

    .nameform>label {
      width: auto;
    }

    .tableSize>tr>th {
      width: 25%;
    }

    .tableSize>tr>td {
      width: 100%;
    }

    .imgInput {
      border-style: dotted;
      border-color: lightgray;
      padding: 10px;
      height: 30vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .imgInput>img {
      height: 100%;
      width: auto;
    }

    .buttonColor {
      background-color: gainsboro;
    }

    .buttonColor:hover {
      background-color: silver;
    }
  </style>

  <title>寄付申し込み</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="top.html">さんすうらんど・りさいくる</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01"
        aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link" href="top.html">トップ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="kifu_m.html">寄付する</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="konyu_m.html">買う</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="help.html">ヘルプ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="お問い合わせ.html">お問い合わせ</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container mt-5 center-block" method="post">
    <h2 class="mb-5">寄付申し込み</h2>
    <form method="post" action="kifu_k.html" enctype="multipart/form-data">
      <table class="table">
        <tbody class="tableSize">
          <tr>
            <th class="align-middle">児童氏名</th>
            <td class="row align-middle nameform">
              <label class="form-label my-auto text-end">姓</label>
              <div>
                <input type="text" class="form-control" placeholder="山田" name="child_family_name">
              </div>
              <label class="form-label my-auto text-end">名</label>
              <div>
                <input type="text" class="form-control" placeholder="太郎" name="child_first_name">
              </div>
            </td>
          </tr>
          <tr>
            <th class="align-middle">保護者氏名</th>
            <td class="row align-middle nameform">
              <label class="form-label my-auto text-end">姓</label>
              <div>
                <input type="text" class="form-control" placeholder="山田" name="parent_family_name">
              </div>
              <label class="form-label my-auto text-end">名</label>
              <div>
                <input type="text" class="form-control" placeholder="一郎" name="parent_first_name">
              </div>
            </td>
          </tr>
          <tr>
            <th class="align-middle">郵便番号</th>
            <td>
              <input type="tel" class="form-control" placeholder="123-4567" pattern="\d{3}-?\d{4}" name="post_code">
          </tr>
          <tr>
            <th class="align-middle">住所</th>
            <td>
              <input type="text" class="form-control" name="phone_number">
            </td>
          </tr>
          <tr>
            <th class="align-middle">電話番号</th>
            <td>
              <input type="tel" class="form-control" placeholder="080-1234-5678" pattern="\d{2,4}-\d{2,4}-\d{3,4}"
                name="address">
            </td>
          </tr>
          <tr>
            <th class="align-middle">メールアドレス</th>
            <td>
              <input type="email" class="form-control" placeholder="yamada.taro@gmail.com" name="email_address">
            </td>
          </tr>
          <tr>
            <th class="align-middle">算数ランド外見の写真</th>
            <td>
              <div class="input-group mb-3">
                <input type="file" class="form-control" id="fileInput1" style="width: 80%"
                  oninput="inputChange(event,1)" name="file_input_1">
                <button type="button" class="form-control buttonColor" onclick="inputCancel(1)">取消</button>
              </div>
              <div class="imgInput" id="appearance_img">
                <img style="display:none" src="">
                <p>画像を選択してください</p>
              </div>
            </td>
          </tr>
          <tr>
            <th class="align-middle">算数ランドの中身の写真</th>
            <td>
              <div class="input-group mb-3">
                <input type="file" class="form-control" id="fileInput2" style="width: 80%"
                  oninput="inputChange(event,2)" name="file_input_2">
                <button type="button" class="form-control buttonColor" onclick="inputCancel(2)">取消</button>
              </div>
              <div class="imgInput" id="inside_img" src="">
                <img style="display: none;">
                <p>画像を選択してください</p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="text-end mt-4">
        <input type="submit" class="btn btn-primary btn-lg" value="確認画面へ">
      </div>
    </form>
  </main>

  <br>
  <script type="text/javascript">
    const appearance_img_id = 'appearance_img';
    const inside_img_id = 'inside_img';
    const fileInput_id_1 = 'fileInput1';
    const fileInput_id_2 = 'fileInput2';
    function inputChange(event, target) {
      const reader = new FileReader();
      const targetID = target == 1 ? appearance_img_id : inside_img_id;
      const targetFile = event.target.files[0];
      if (targetFile == null) {
        const parent = document.getElementById(targetID);
        const inputImg = parent.getElementsByTagName('img')[0];
        inputImg.src = '';
        inputImg.style.display = 'none';
        parent.getElementsByTagName('p')[0].style.display = null;
      }
      else {
        reader.onload = function (evnet) {
          const parent = document.getElementById(targetID);
          const inputImg = parent.getElementsByTagName('img')[0];
          inputImg.src = reader.result;
          inputImg.style.display = null;
          parent.getElementsByTagName('p')[0].style.display = 'none';
        }
        reader.readAsDataURL(targetFile);
      }
    }
    function inputCancel(target) {
      document.getElementById(target == 1 ? fileInput_id_1 : fileInput_id_2).value = '';
      const parent = document.getElementById(target == 1 ? appearance_img_id : inside_img_id);
      const inputImg = parent.getElementsByTagName('img')[0];
      inputImg.src = '';
      inputImg.style.display = 'none';
      parent.getElementsByTagName('p')[0].style.display = null;
    }
    window.onload = function () {
      inputCancel(1);
      inputCancel(2);
    }
  </script>

  <br>
  <footer class="border-top footer text-center">

    <div class="container">
      ©こぴーらいと
    </div>
  </footer>
</body>

</html>